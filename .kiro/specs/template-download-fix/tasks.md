# 实施计划

- [x] 1. 后端模板生成API完善
  - 完善TemplateGenerator类，确保能正确生成包含示例数据和说明的Excel模板文件
  - 实现期刊模板生成API端点，返回正确的Excel文件响应
  - 优化文献模板生成API，确保文件格式和内容正确
  - 添加API健康检查端点，用于检测真实API可用性
  - _需求: 4.1, 4.2, 4.3, 4.4, 4.5_

- [x] 2. 修复期刊导入模板下载功能
  - 修复JournalImport组件中的handleDownloadTemplate函数，调用真实的API接口
  - 实现正确的二进制文件下载处理，设置合适的响应类型和文件名
  - 添加下载过程中的加载状态指示和错误处理
  - 确保下载功能的认证验证正常工作
  - _需求: 2.1, 2.2, 2.3, 2.4, 2.5_

- [x] 3. 优化文献导入模板下载功能
  - 检查并修复PublicationImport组件中的模板下载逻辑
  - 确保文件下载的Content-Type和文件名设置正确
  - 优化下载错误处理，提供用户友好的错误信息
  - 测试不同浏览器下的文件下载兼容性
  - _需求: 1.1, 1.2, 1.3, 1.4, 1.5_

- [x] 4. 实现API模式检测机制
  - 创建API状态检查服务，检测当前是否运行在演示模式
  - 实现后端健康检查API，返回服务状态和模式信息
  - 在前端添加API模式检测逻辑，自动识别演示模式和真实API模式
  - 实现模式状态的本地存储和缓存机制
  - _需求: 3.1, 3.2, 3.3, 3.4, 3.5_

- [x] 5. 添加演示模式切换功能
  - 在用户界面中添加模式切换提示和按钮
  - 实现从演示模式切换到真实API模式的功能
  - 添加模式切换的确认对话框和状态反馈
  - 实现切换失败时的回退机制和错误提示
  - _需求: 3.2, 3.3, 3.4, 3.5_

- [x] 6. 创建统一的模板下载组件
  - 创建可复用的TemplateDownloadButton组件
  - 实现统一的下载处理逻辑，支持文献和期刊两种模板类型
  - 添加下载进度指示和状态反馈
  - 实现下载失败时的重试机制
  - _需求: 5.1, 5.2, 5.3, 5.4, 5.5_

- [x] 7. 完善模板内容标准化
  - 更新文献模板，添加中英文对照的列标题和详细说明
  - 更新期刊模板，包含影响因子格式说明和分区值示例
  - 添加数据验证规则说明和常见错误提示
  - 创建模板使用说明工作表，提供详细的导入指南
  - _需求: 6.1, 6.2, 6.3, 6.4, 6.5_

- [x] 8. 实现下载错误处理机制
  - 创建下载错误分类和处理策略
  - 实现网络错误、认证错误、权限错误等不同场景的处理
  - 添加用户友好的错误提示信息和解决建议
  - 实现浏览器兼容性检查和替代下载方案
  - _需求: 7.1, 7.2, 7.3, 7.4, 7.5_

- [x] 9. 优化用户体验和界面交互
  - 改进下载按钮的视觉设计和交互反馈
  - 添加下载状态的实时反馈和进度指示
  - 实现下载成功后的确认提示和后续操作建议
  - 优化移动端设备上的下载体验
  - _需求: 5.4, 6.5, 7.5_

- [x] 10. 添加下载功能的单元测试
  - 为模板生成器编写单元测试，验证Excel文件生成的正确性
  - 为下载处理逻辑编写测试，覆盖成功和失败场景
  - 为API模式检测和切换功能编写测试
  - 为错误处理机制编写测试用例
  - _需求: 4.1, 4.2, 5.1, 5.2_

- [x] 11. 进行集成测试和兼容性测试
  - 测试完整的模板下载流程，从点击按钮到文件保存
  - 进行不同浏览器的兼容性测试（Chrome、Firefox、Safari、Edge）
  - 测试不同网络条件下的下载表现（正常、慢速、断网）
  - 测试不同用户权限下的下载功能访问控制
  - _需求: 1.5, 2.5, 7.1, 7.2, 7.3_

- [ ] 12. 性能优化和安全加固
  - 实现模板文件的缓存机制，避免重复生成
  - 添加下载频率限制，防止恶意下载
  - 实现下载操作的日志记录和监控
  - 优化大文件下载的内存使用和性能
  - _需求: 4.5, 7.4, 7.5_

- [ ] 13. 文档更新和部署准备
  - 更新模板下载功能的用户使用文档
  - 创建API模式切换的操作指南
  - 更新开发文档，说明模板生成和下载的技术实现
  - 准备生产环境的配置和部署脚本
  - _需求: 6.4, 3.5, 7.5_